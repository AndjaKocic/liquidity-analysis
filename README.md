# liquidity-analysis
Liquidity analysis of MOEX

## Install Requirements for Ubuntu 18.04

```
sudo apt update -y
sudo apt install -y python3.7 python3.7-dev build-essential libssl-dev libffi-dev python-virtualenv
sudo apt install -y unixodbc unixodbc-dev
```

## Setup Requirements

```
python3.7 -m virtualenv -p `which python3.7` venv/cpython37
source venv/cpython37/bin/activate
pip install -r requirements.txt
```

## Задача 1

Создание базы данных и внос txt файлов в SQL базу:

1. Скриптом на SQLзагрузить txtфайл, содержащий orderlog единой таблицейв базу данных, и проверить поля таблицы на наличие очевидных ошибок (пропуски данных, отрицательные значение, [одну ошибку придумать и проверить самостоятельно]).Форматы полей должны соответствовать спецификациям от биржи.

2. С помощью запроса SQL (возможно вложенных запросов)разбить таблицу на три, содержащие 1) поток заявок с обыкновенными акциями; 2) поток заявок с привилегированными акциями; 3) поток заявок с облигациями. Для этого внести базу в таблицу-классификатор тикеров по указанным трем типам ценных бумаг (классификацию скачать с сайта Московской биржи).

```
python problem1.py
```

3. SQLзапросом в таблице торгов обыкновенными акциями найти тикер, по которым было совершенно больше всего сделок, т.е. исполнено больше всего рыночных заявок.

```
sqlite3 order_log.db < problem1.sql
# OUTPUT: SBER|21635
```

## Задача 2

a. Запрашивает в базе данных таблицу-классификатор торгуемых ценных бумаг.

b. Предлагает пользователю ввести тикер и момент времени в течение торговой сессий [можно узнать на сайте Московской биржи или определить из данных orderlog’а].

c. По введенным данным запрашивает из соответствующей таблице БД данные о потоке заявок по указанному тикеру до указанного момента времени.

d. По полученным данным построит «стакан» и визуализирует его в виде таблицы и графика; на графике в явном виде отмечает такие аспекты ликвидности как сжатость (бид-аск спрэд) и глубину (объем на лучших ценах покупки и продажи).

e. Выявляет заявки типа «айзберг» и сохраняет информацию их номерах, выявленных в них скрытых объемах и времени обнаружения в виде таблицы.

f. (Бонус) отправить информацию о скрытых объемах обратно в базу данных.

```
python problem2.py
# INPUT seccode: SBER
# INPUT timestamp: 2015-09-01 12:00:00
```
